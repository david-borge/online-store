<!-- Product Card -->
<div
    class="product-card {{ productCardTypeClass }}"
    [ngStyle]="{
        'background-color':
            productCardTypeClass === 'product-card-featured'
                ? product.cardAndHeaderBackgroundColor
                : '',
    }"
>
    <a [routerLink]="[orderId !== 0 ? '/order/' + orderId : '/product/' + product.slug]">
        <!-- Ejemplo: <a [routerLink]="['/product/the-metamorphosis']"> -->

        <!-- Product Image -->
        <div class="product-card-image-container">
            <picture>
                <source
                    srcset="{{( (orderImageThumbnail !== '') ? orderImageThumbnail : product.imageThumbnail )}}.webp"
                    type="image/webp"
                />
                <!-- <img ngSrc="{{product.imageThumbnail}}.png" alt="{{product.name}}" width="{{product.imageWidth}}" height="{{product.imageHeight}}" priority> -->
                <!-- <img ngSrc="{{( (orderImageThumbnail != '') ? orderImageThumbnail : product.imageThumbnail )}}.png" alt="{{product.name}}" width="{{product.imageWidth}}" height="{{product.imageHeight}}" priority appImageLoadDirective> -->
                <!-- <img ngSrc="{{( (orderImageThumbnail != '') ? orderImageThumbnail : product.imageThumbnail )}}.png" alt="{{product.name}}" width="{{( (product.imageWidth != '') ? product.imageWidth : orderImageWidth )}}" height="{{( (product.imageHeight != '') ? product.imageHeight : orderImageHeight )}}" priority appImageLoadDirective> -->
                <img
                    ngSrc="{{
                        orderImageThumbnail !== '' ? orderImageThumbnail : product.imageThumbnail
                    }}.png"
                    alt="{{ product.name }}"
                    width="{{ product.imageWidth ? product.imageWidth : orderImageWidth }}"
                    height="{{ product.imageHeight ? product.imageHeight : orderImageHeight }}"
                    priority
                    appImageLoadDirective
                />
                <!-- Ejemplo: -->
                <!-- <source srcset="/assets/img/products/dualsense-wireless-controller-thumbnail.webp" type="image/webp"> -->
                <!-- <img ngSrc="/assets/img/products/dualsense-wireless-controller-thumbnail.png" alt="DualSense Wireless Controller" width="508" height="475"> -->
            </picture>
        </div>

        <!-- Product or Order Copy Container -->
        <div class="product-or-order-card-copy-container">
            @if (productCardTypeClass !== 'product-card-order') {
                <div class="product-or-order-card-copy-name-manufacturer-rating-container">
                    <!-- Product Name -->
                    <div
                        class="product-card-name"
                        [innerHTML]="productCardTitleHeadingTagInnerHTML"
                    >
                        <!-- Ejemplo: <h2>Chuck 70 Hi Sneakers</h2> -->
                    </div>
                    <!-- Product Manufacturer -->
                    <div class="product-card-manufacturer">{{ product.manufacturer }}</div>
                    <!-- Product Rating -->
                    <!-- Show only if product.ratingNumber exists (is not NULL) -->
                    @if (productCardTypeClass === 'product-card-small' && product.ratingNumber) {
                        <app-product-rating
                            [productCardRatingNumber]="product.ratingNumber"
                        ></app-product-rating>
                    }
                </div>
            }

            <!-- Order Total -->
            @if (productCardTypeClass === 'product-card-order') {
                <div class="order-total">Order total</div>
            }

            <!-- Product or Order Price -->
            <div class="product-or-order-card-price">
                {{ (orderTotal !== 0 ? orderTotal : product.price) | currencyFormat }}
            </div>

            <!-- Order Arrival Date -->
            @if (productCardTypeClass === 'product-card-order') {
                <div class="order-arrival-date" [ngClass]="{ 'order-active': orderIsActive }">
                    {{
                        (orderIsActive ? 'Arriving' : 'Arrived') +
                            ' ' +
                            (orderArrivalDateFormated !== ''
                                ? orderArrivalDateFormated
                                : (orderArrivalDate | date: 'd MMM'))
                    }}
                </div>
            }
        </div>

        <!-- Order Button -->
        @if (productCardTypeClass === 'product-card-order') {
            <div class="order-button">
                <div class="order-button--icon-container">
                    <!-- Icon: chevron-right -->
                    <!-- prettier-ignore -->
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 15L12.5 10L7.5 5" stroke="#363939" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
            </div>
        }
    </a>
</div>
